function getFrequency(e,t=!0){let s={};for(let r=0;r<e.length;r++){const a=e[r].word,n=t?a[0]:a[a.length-1];s[n]=(s[n]||0)+1}return s}self.onmessage=function(e){if("csv"===e.data.type){let t=e.data.content.split(/\r?\n/),s=[];for(let e=1;e<t.length;e++){let r=t[e].split(",");if("O"!==r[5])continue;let a=r[0];s.push({word:a,species:r[1].split("|"),parts:r[2].split("|"),categories:r[3].split("|"),topics:r[4].split("|"),firstCharacter:a[0],lastCharacter:a[a.length-1],firstCharacterPhonemes:r[6],allPhonemes:r[7],lastCharacterPhonemes:r[8]})}self.postMessage({type:"db",db:s,firstCharacterfrequency:getFrequency(s,!0),lastCharacterfrequency:getFrequency(s,!1)})}};