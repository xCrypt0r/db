function parseCsv(t){const e=t.split(/\r?\n/),s=[];for(let t=1;t<e.length;t++){const r=e[t].split(",");if(r.length<9||"O"!==r[5])continue;const n=r[0];s.push({word:n,species:r[1].split("|"),parts:r[2].split("|"),categories:r[3].split("|"),topics:r[4].split("|"),firstCharacter:n[0],lastCharacter:n[n.length-1],firstCharacterPhonemes:r[6],allPhonemes:r[7],lastCharacterPhonemes:r[8]})}return s}function getFrequency(t,e=!0){const s={};for(let r=0;r<t.length;r++){const n=t[r].word,c=e?n[0]:n[n.length-1];s[c]=(s[c]||0)+1}return s}self.onmessage=function(t){"start"===t.data.type&&fetch("https://xcrypt0r.github.io/db/db.csv").then((t=>t.text())).then((t=>{const e=parseCsv(t);self.postMessage({type:"db",db:e,firstCharacterfrequency:getFrequency(e,!0),lastCharacterfrequency:getFrequency(e,!1)})}))};
